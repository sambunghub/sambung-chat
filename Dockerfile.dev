# =============================================================================
# Development Dockerfile for SambungChat
# =============================================================================
# Optimized Dockerfile for development with hot reload
#
# Strategy:
# - Pre-install dependencies in the image for faster container startup
# - Mount source code via volumes for hot reload
# - Use named volumes for bun cache to speed up rebuilds
#
# =============================================================================

# -----------------------------------------------------------------------------
# Base image with Bun
# -----------------------------------------------------------------------------
FROM oven/bun:1.2.23
WORKDIR /app

# Set development environment
ENV NODE_ENV=development

# Copy package files and install dependencies
# This ensures dependencies are pre-installed in the image
COPY package.json bun.lock* ./
COPY packages packages/
COPY apps apps/

# Install all dependencies (including dev dependencies for hot reload)
RUN bun install --frozen-lockfile

# Expose ports
EXPOSE 3000 5173

# Set default working directory
WORKDIR /app
