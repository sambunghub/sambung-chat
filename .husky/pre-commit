echo "ğŸ” Pre-commit checks started..."
echo ""

# 1. Run lint-staged for formatting and quick checks
echo "1ï¸âƒ£  Running lint-staged (formatting)..."
bunx lint-staged
echo "   âœ… lint-staged passed"
echo ""

# 2. Run full ESLint check
echo "2ï¸âƒ£  Running ESLint..."
bun run lint
if [ $? -ne 0 ]; then
  echo "   âŒ ESLint failed - fix errors before committing"
  exit 1
fi
echo "   âœ… ESLint passed"
echo ""

# 3. Run svelte-check for web app
echo "3ï¸âƒ£  Running svelte-check on web app..."
cd apps/web && bun run check
if [ $? -ne 0 ]; then
  echo "   âŒ svelte-check failed - fix type errors before committing"
  exit 1
fi
cd ../..
echo "   âœ… svelte-check passed"
echo ""

# 4. Run full build to ensure everything compiles
echo "4ï¸âƒ£  Running build..."
bun run build
if [ $? -ne 0 ]; then
  echo "   âŒ Build failed - fix build errors before committing"
  exit 1
fi
echo "   âœ… Build passed"
echo ""

echo "âœ… All pre-commit checks passed! Safe to commit."
echo ""
